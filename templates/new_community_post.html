{% extends "base.html" %}

{% block title %}‡§®‡§Ø‡§æ ‡§∏‡§µ‡§æ‡§≤ - ‡§ï‡§ø‡§∏‡§æ‡§® ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø{% endblock %}

{% block content %}
<div class="container-fluid px-3 py-4">
    <!-- Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h2 class="text-success mb-1">‚ùì ‡§®‡§Ø‡§æ ‡§∏‡§µ‡§æ‡§≤ ‡§™‡•Ç‡§õ‡•á‡§Ç</h2>
                    <p class="text-muted mb-0">‡§Ö‡§™‡§®‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø ‡§∏‡•á ‡§Æ‡§¶‡§¶ ‡§™‡§æ‡§è‡§Ç</p>
                </div>
                <a href="{{ url_for('community') }}" class="btn btn-outline-success">
                    <i class="fas fa-arrow-left"></i> ‡§µ‡§æ‡§™‡§∏
                </a>
            </div>
        </div>
    </div>

    <!-- Form -->
    <div class="row">
        <div class="col-lg-8 col-12">
            <div class="card border-0 shadow-sm">
                <div class="card-body p-4">
                    <form method="POST">
                        <!-- Post Type -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">‡§™‡•ã‡§∏‡•ç‡§ü ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞</label>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="is_question" id="is_question" checked>
                                <label class="form-check-label" for="is_question">
                                    ‚ùì ‡§Ø‡§π ‡§è‡§ï ‡§∏‡§µ‡§æ‡§≤ ‡§π‡•à (AI ‡§∏‡§≤‡§æ‡§π‡§ï‡§æ‡§∞ ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§ú‡§µ‡§æ‡§¨ ‡§¶‡•á‡§ó‡§æ)
                                </label>
                            </div>
                        </div>

                        <!-- Title -->
                        <div class="mb-4">
                            <label for="title" class="form-label fw-bold">‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï *</label>
                            <input type="text" class="form-control form-control-lg" id="title" name="title" 
                                   placeholder="‡§Ö‡§™‡§®‡•á ‡§∏‡§µ‡§æ‡§≤ ‡§ï‡§æ ‡§∏‡§Ç‡§ï‡•ç‡§∑‡§ø‡§™‡•ç‡§§ ‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï ‡§≤‡§ø‡§ñ‡•á‡§Ç..." required maxlength="200">
                            <div class="form-text">‡§â‡§¶‡§æ‡§π‡§∞‡§£: "‡§ß‡§æ‡§® ‡§ï‡•Ä ‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§™‡§∞ ‡§≠‡•Ç‡§∞‡•á ‡§ß‡§¨‡•ç‡§¨‡•á ‡§¶‡§ø‡§ñ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç"</div>
                        </div>

                        <!-- Category -->
                        <div class="mb-4">
                            <label for="category" class="form-label fw-bold">‡§∂‡•ç‡§∞‡•á‡§£‡•Ä *</label>
                            <select class="form-select" id="category" name="category" required>
                                <option value="">‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç</option>
                                {% for category in categories %}
                                <option value="{{ category.name }}">{{ category.icon }} {{ category.description }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <!-- Content -->
                        <div class="mb-4">
                            <label for="content" class="form-label fw-bold">‡§µ‡§ø‡§∏‡•ç‡§§‡§æ‡§∞ ‡§∏‡•á ‡§¨‡§§‡§æ‡§è‡§Ç *</label>
                            <textarea class="form-control" id="content" name="content" rows="8" 
                                      placeholder="‡§Ö‡§™‡§®‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡§æ ‡§µ‡§ø‡§∏‡•ç‡§§‡§æ‡§∞ ‡§∏‡•á ‡§µ‡§∞‡•ç‡§£‡§® ‡§ï‡§∞‡•á‡§Ç..." required></textarea>
                            <div class="form-text">
                                ‡§ú‡§ø‡§§‡§®‡•Ä ‡§Ö‡§ß‡§ø‡§ï ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§¶‡•á‡§Ç‡§ó‡•á, ‡§â‡§§‡§®‡§æ ‡§¨‡•á‡§π‡§§‡§∞ ‡§ú‡§µ‡§æ‡§¨ ‡§Æ‡§ø‡§≤‡•á‡§ó‡§æ‡•§ ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§ï‡§∞‡•á‡§Ç:
                                <ul class="mt-2 mb-0">
                                    <li>‡§´‡§∏‡§≤ ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§î‡§∞ ‡§ï‡§ø‡§∏‡•ç‡§Æ</li>
                                    <li>‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡§¨ ‡§∏‡•á ‡§π‡•à</li>
                                    <li>‡§Æ‡•å‡§∏‡§Æ ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø</li>
                                    <li>‡§™‡§π‡§≤‡•á ‡§ï‡•ç‡§Ø‡§æ ‡§â‡§™‡§ö‡§æ‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§π‡•à</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-success btn-lg">
                                <i class="fas fa-paper-plane"></i> ‡§∏‡§µ‡§æ‡§≤ ‡§™‡•ã‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="col-lg-4 col-12 mt-4 mt-lg-0">
            <!-- Tips Card -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-body p-3">
                    <h5 class="card-title text-success">üí° ‡§¨‡•á‡§π‡§§‡§∞ ‡§ú‡§µ‡§æ‡§¨ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ü‡§ø‡§™‡•ç‡§∏</h5>
                    <ul class="list-unstyled mb-0">
                        <li class="mb-2">
                            <i class="fas fa-check text-success me-2"></i>
                            ‡§∏‡•ç‡§™‡§∑‡•ç‡§ü ‡§î‡§∞ ‡§∏‡§Ç‡§ï‡•ç‡§∑‡§ø‡§™‡•ç‡§§ ‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï ‡§≤‡§ø‡§ñ‡•á‡§Ç
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-check text-success me-2"></i>
                            ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡§æ ‡§µ‡§ø‡§∏‡•ç‡§§‡§æ‡§∞ ‡§∏‡•á ‡§µ‡§∞‡•ç‡§£‡§® ‡§ï‡§∞‡•á‡§Ç
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-check text-success me-2"></i>
                            ‡§∏‡§π‡•Ä ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-check text-success me-2"></i>
                            ‡§Ø‡§¶‡§ø ‡§∏‡§Ç‡§≠‡§µ ‡§π‡•ã ‡§§‡•ã ‡§´‡•ã‡§ü‡•ã ‡§≠‡•Ä ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç
                        </li>
                        <li class="mb-0">
                            <i class="fas fa-check text-success me-2"></i>
                            ‡§µ‡§ø‡§®‡§Æ‡•ç‡§∞ ‡§≠‡§æ‡§∑‡§æ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç
                        </li>
                    </ul>
                </div>
            </div>

            <!-- AI Assistant Info -->
            <div class="card border-0 shadow-sm">
                <div class="card-body p-3">
                    <h5 class="card-title text-primary">ü§ñ AI ‡§ï‡•É‡§∑‡§ø ‡§∏‡§≤‡§æ‡§π‡§ï‡§æ‡§∞</h5>
                    <p class="card-text text-muted mb-3">
                        ‡§ú‡§¨ ‡§Ü‡§™ ‡§∏‡§µ‡§æ‡§≤ ‡§™‡•ã‡§∏‡•ç‡§ü ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç, ‡§§‡•ã ‡§π‡§Æ‡§æ‡§∞‡§æ AI ‡§∏‡§≤‡§æ‡§π‡§ï‡§æ‡§∞ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§è‡§ï ‡§™‡•ç‡§∞‡§æ‡§∞‡§Ç‡§≠‡§ø‡§ï ‡§ú‡§µ‡§æ‡§¨ ‡§¶‡•á‡§§‡§æ ‡§π‡•à‡•§
                    </p>
                    <div class="alert alert-info py-2 px-3 mb-0">
                        <small>
                            <i class="fas fa-info-circle me-1"></i>
                            AI ‡§ï‡§æ ‡§ú‡§µ‡§æ‡§¨ ‡§∏‡§ø‡§∞‡•ç‡§´ ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§π‡•à‡•§ ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø ‡§π‡§Æ‡•á‡§∂‡§æ ‡§Ö‡§®‡•Å‡§≠‡§µ‡•Ä ‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡§≤‡§æ‡§π ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§≤‡•á‡§Ç‡•§
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Auto-resize textarea
document.getElementById('content').addEventListener('input', function() {
    this.style.height = 'auto';
    this.style.height = (this.scrollHeight) + 'px';
});

// Form validation
document.querySelector('form').addEventListener('submit', function(e) {
    const title = document.getElementById('title').value.trim();
    const content = document.getElementById('content').value.trim();
    const category = document.getElementById('category').value;
    
    if (!title || !content || !category) {
        e.preventDefault();
        alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§≠‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§´‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç');
        return;
    }
    
    if (title.length < 10) {
        e.preventDefault();
        alert('‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï ‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ 10 ‡§Ö‡§ï‡•ç‡§∑‡§∞ ‡§ï‡§æ ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è');
        return;
    }
    
    if (content.length < 20) {
        e.preventDefault();
        alert('‡§µ‡§ø‡§µ‡§∞‡§£ ‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ 20 ‡§Ö‡§ï‡•ç‡§∑‡§∞ ‡§ï‡§æ ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è');
        return;
    }
});

// Character counter for title
document.getElementById('title').addEventListener('input', function() {
    const maxLength = 200;
    const currentLength = this.value.length;
    const remaining = maxLength - currentLength;
    
    // Create or update character counter
    let counter = document.getElementById('titleCounter');
    if (!counter) {
        counter = document.createElement('div');
        counter.id = 'titleCounter';
        counter.className = 'form-text text-end';
        this.parentNode.appendChild(counter);
    }
    
    counter.textContent = `${currentLength}/${maxLength} ‡§Ö‡§ï‡•ç‡§∑‡§∞`;
    counter.className = `form-text text-end ${remaining < 20 ? 'text-warning' : ''}`;
});
</script>
{% endblock %}